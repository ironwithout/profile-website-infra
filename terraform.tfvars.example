aws_account_id = "123456789012"
aws_region     = "us-east-1"

# ECR Repository Configuration
ecr_repository_arns = [
  "arn:aws:ecr:us-east-1:123456789012:repository/profile-api",
  "arn:aws:ecr:us-east-1:123456789012:repository/profile-worker"
]

# ECS Services
ecs_services = {
  api = {
    # Required
    container_name      = "api"
    container_image     = "123456789012.dkr.ecr.us-east-1.amazonaws.com/profile-api"
    container_image_tag = "v1.0.0"
    container_port      = 3000

    # Optional overrides
    task_cpu            = "1024"
    task_memory         = "2048"
    desired_count       = 3
    launch_type         = "FARGATE"
    log_retention_days  = 30

    environment_variables = {
      NODE_ENV  = "production"
      LOG_LEVEL = "info"
    }

    health_check_command      = ["CMD-SHELL", "curl -f http://localhost:3000/health || exit 1"]
    health_check_grace_period = 120
  }

  worker = {
    container_name  = "worker"
    container_image = "123456789012.dkr.ecr.us-east-1.amazonaws.com/profile-worker"
    container_image_tag = "v1.0.0"
    container_port  = 8080

    # Optional overrides
    task_cpu            = "512"
    task_memory         = "1024"
    desired_count       = 2
    log_retention_days  = 30

    environment_variables = {
      NODE_ENV = "production"
    }
  }
}

domain_name = "example.com"

# ALB Routing - Separate from service definitions
alb_routes = {
  api = {
    path_pattern = "/api/*"
    priority     = 100
    # Optional overrides
    # host_header = "api.example.com"
    # health_check_path = "/health"
  }

  worker = {
    path_pattern = "/worker/*"
    priority     = 200
  }
}
