# Development Environment Configuration

aws_account_id = "123456789012"
aws_region     = "us-east-1"

project_name = "myapp"
environment  = "dev"

# Network
vpc_cidr           = "10.0.0.0/16"
availability_zones = ["us-east-1a", "us-east-1b"]

# ECR Repository Configuration
ecr_repository_arns = {
  app = "arn:aws:ecr:region:account-id:repository/repo-name"
}

# ECR Repository URLs for container images
ecr_repository_urls = {
  app = "account-id.dkr.ecr.region.amazonaws.com/repo-name"
}

# ECS Services Configuration
enable_container_insights = false

# Define multiple services as needed (api, worker, etc.)
ecs_services = {
  api = {
    container_name  = "api"
    container_image = "image_url"
    container_image_tag = "latest"
    container_port  = 3000
    container_environment_variables = [
      { name = "NODE_ENV", value = "development" },
      { name = "LOG_LEVEL", value = "debug" }
    ]
    task_cpu                           = "256"
    task_memory                        = "512"
    desired_count                      = 1
    launch_type                        = "FARGATE_SPOT"
    assign_public_ip                   = true
    use_private_subnets                = false
    log_retention_days                 = 3
    health_check_command               = ["CMD-SHELL", "curl -f http://localhost:3000/health || exit 1"]
    health_check_interval              = 30
    health_check_timeout               = 5
    health_check_retries               = 3
    health_check_start_period          = 60
    deployment_maximum_percent         = 200
    deployment_minimum_healthy_percent = 100
    enable_deployment_circuit_breaker  = true
    enable_deployment_rollback         = true
  }
  # Uncomment to add more services:
  # worker = {
  #   container_name  = "worker"
  #   container_port  = 8080
  #   ...
  # }
}
